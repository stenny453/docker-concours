"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class CreateCandidats {
    async run(factory, connection) {
        await connection.query(`INSERT INTO candidat  (
        nom,
        prenoms,
        dateNaiss,
        dateNaissExacte,
        situationMatrimoniale,
        lieuNaissance,
        telephone,
        nomPere,
        nomMere,
        adresseParent,
        numCIN,
        dateCIN,
        lieuCIN,
        dateDuplicata,
        lieuDuplicata,
        photo,
        mel,
        numBord,
        dateBord,
        agenceBord,
        montantBord,
        photoBord,
        photoDiplome,
        photoEtatCivil,
        premierChoixCodeFormation,
        deuxiemeChoixCodeFormation,
        numBacc,
        ficheRenseignement,
        demandeInscription)  VALUES (
            'Rakoto',
            'Mendrika',
            '1992-12-12 00:00:00',
            null,
            'célibataire',
            'Manjakaray',
            '0347835668',
            'Rakoto Aimé',
            'Rahary Sah',
            'II O 154 Bis',
            '101254321456',
            '2016-03-24 00:00:00',
            'Tana V',
            null,
            '',
            'mendrika.jpeg',
            'ainarakotomalala227@gmail.com',
            '45621346',
            '2022-05-05 00:00:00',
            'Tsianolondroa',
            '500000',
            'bordMendrika.jpeg',
            'diploMendrika.jpeng',
            'etatCivilMendrika.jpeg',
            '1',
            '2',
            '1023564',
            '',
            ''
        )`);
        await connection.query(`CREATE TABLE IF NOT EXISTS candidat_audit (
            id INT AUTO_INCREMENT PRIMARY KEY,
            operation_type VARCHAR(20) NOT NULL,
            nom VARCHAR(255) NOT NULL,
            prenoms VARCHAR(255) NOT NULL,
            dateNaiss DATETIME NOT NULL,
            dateNaissExacte DATETIME NULL,
            situationMatrimoniale VARCHAR(50) NOT NULL,
            lieuNaissance VARCHAR(50) NOT NULL,
            telephone VARCHAR(50) NOT NULL,
            nomPere VARCHAR(50)  NULL,
            nomMere VARCHAR(50)  NULL,
            adresseParent VARCHAR(50) NOT NULL,
            numCIN VARCHAR(12)  NULL,
            dateCIN DATETIME NULL,
            lieuCIN VARCHAR(255) NULL,
            dateDuplicata DATETIME NULL,
            lieuDuplicata VARCHAR(255) NULL,
            photo VARCHAR(255) NOT NULL,
            mel VARCHAR(255) NULL,
            numBord VARCHAR(255) NOT NULL,
            dateBord DATETIME NOT NULL,
            agenceBord VARCHAR(100) NOT NULL,
            montantBord INT(11) NOT NULL,
            photoBord VARCHAR(250) NOT NULL,
            photoDiplome VARCHAR(250) NOT NULL,
            photoEtatCivil VARCHAR(250) NOT NULL, 
            premierChoix INT(11)  NULL,
            deuxiemeChoix INT(11)  NULL,
            numBacc INT(11) NOT NULL,
            old_nom VARCHAR(255) DEFAULT NULL,
            old_prenoms VARCHAR(255) DEFAULT NULL,
            old_dateNaiss DATETIME DEFAULT NULL,
            old_dateNaissExacte DATETIME DEFAULT NULL,
            old_situationMatrimoniale VARCHAR(50) DEFAULT NULL,
            old_lieuNaissance VARCHAR(50) DEFAULT NULL,
            old_telephone VARCHAR(50) DEFAULT NULL,
            old_nomPere VARCHAR(50) DEFAULT NULL,
            old_nomMere VARCHAR(50) DEFAULT NULL,
            old_adresseParent VARCHAR(50) DEFAULT NULL,
            old_numCIN VARCHAR(12) DEFAULT NULL,
            old_dateCIN DATETIME DEFAULT NULL,
            old_lieuCIN VARCHAR(255) DEFAULT NULL,
            old_dateDuplicata DATETIME DEFAULT NULL,
            old_lieuDuplicata VARCHAR(255) DEFAULT NULL,
            old_photo VARCHAR(255) DEFAULT NULL,
            old_mel VARCHAR(255) DEFAULT NULL,
            old_numBord VARCHAR(255) DEFAULT NULL,
            old_dateBord DATETIME DEFAULT NULL,
            old_agenceBord VARCHAR(100) DEFAULT NULL,
            old_montantBord INT(11) DEFAULT NULL,
            old_photoBord VARCHAR(250) DEFAULT NULL,
            old_photoDiplome VARCHAR(250) DEFAULT NULL,
            old_photoEtatCivil VARCHAR(250) DEFAULT NULL,
            old_premierChoix INT(11) NOT NULL,
            old_deuxiemeChoix INT(11) NOT NULL,
            old_numBacc INT(11) NOT NULL,
            createdAt DATETIME DEFAULT NULL,
            userId INT NOT NULL,
            FOREIGN KEY (userId) REFERENCES user (id)
            );`);
        await connection.query(`
            CREATE TRIGGER before_candidat_insert
            BEFORE INSERT ON candidat 
            FOR EACH ROW
                INSERT INTO candidat_audit
                SET operation_type = 'ajout',
                nom = NEW.nom,
                prenoms = NEW.prenoms,
                dateNaiss = NEW.dateNaiss,
                dateNaissExacte = NEW.dateNaissExacte,
                situationMatrimoniale = NEW.situationMatrimoniale,
                lieuNaissance = NEW.lieuNaissance,
                telephone = NEW.telephone,
                nomPere = NEW.nomPere,
                nomMere = NEW.nomMere,
                adresseParent = NEW.adresseParent,
                numCIN = NEW.numCIN,
                dateCIN = NEW.dateCIN,
                lieuCIN = NEW.lieuCIN,
                dateDuplicata = NEW.dateDuplicata,
                lieuDuplicata = NEW.lieuDuplicata,
                photo = NEW.photo,
                mel = NEW.mel,
                numBord = NEW.numBord,
                dateBord = NEW.dateBord,
                agenceBord = NEW.agenceBord,
                montantBord = NEW.montantBord,
                photoBord = NEW.photoBord,
                photoDiplome = NEW.photoDiplome,
                photoEtatCivil = NEW.photoEtatCivil,
                premierChoix = NEW.premierChoixCodeFormation,
                deuxiemeChoix = NEW.deuxiemeChoixCodeFormation,
                numBacc = NEW.numBacc,
                userId = '1',
                createdAt = NOW();
        `);
        await connection.query(`
            CREATE TRIGGER before_candidat_update
            BEFORE UPDATE ON candidat 
            FOR EACH ROW
                INSERT INTO candidat_audit
                SET operation_type = 'modification',
                nom = NEW.nom,
                prenoms = NEW.prenoms,
                dateNaiss = NEW.dateNaiss,
                dateNaissExacte = NEW.dateNaissExacte,
                situationMatrimoniale = NEW.situationMatrimoniale,
                lieuNaissance = NEW.lieuNaissance,
                telephone = NEW.telephone,
                nomPere = NEW.nomPere,
                nomMere = NEW.nomMere,
                adresseParent = NEW.adresseParent,
                numCIN = NEW.numCIN,
                dateCIN = NEW.dateCIN,
                lieuCIN = NEW.lieuCIN,
                dateDuplicata = NEW.dateDuplicata,
                lieuDuplicata = NEW.lieuDuplicata,
                photo = NEW.photo,
                mel = NEW.mel,
                numBord = NEW.numBord,
                dateBord = NEW.dateBord,
                agenceBord = NEW.agenceBord,
                montantBord = NEW.montantBord,
                photoBord = NEW.photoBord,
                photoDiplome = NEW.photoDiplome,
                photoEtatCivil = NEW.photoEtatCivil,
                premierChoix = NEW.premierChoixCodeFormation,
                deuxiemeChoix = NEW.deuxiemeChoixCodeFormation,
                numBacc = NEW.numBacc,
                old_nom = OLD.nom,
                old_prenoms = OLD.prenoms,
                old_dateNaiss = OLD.dateNaiss,
                old_dateNaissExacte = OLD.dateNaissExacte,
                old_situationMatrimoniale = OLD.situationMatrimoniale,
                old_lieuNaissance = OLD.lieuNaissance,
                old_telephone = OLD.telephone,
                old_nomPere = OLD.nomPere,
                old_nomMere = OLD.nomMere,
                old_adresseParent = OLD.adresseParent,
                old_numCIN = OLD.numCIN,
                old_dateCIN = OLD.dateCIN,
                old_lieuCIN = OLD.lieuCIN,
                old_dateDuplicata = OLD.dateDuplicata,
                old_lieuDuplicata = OLD.lieuDuplicata,
                old_photo = OLD.photo,
                old_mel = OLD.mel,
                old_numBord = OLD.numBord,
                old_dateBord = OLD.dateBord,
                old_agenceBord = OLD.agenceBord,
                old_montantBord = OLD.montantBord,
                old_photoBord = OLD.photoBord,
                old_photoDiplome = OLD.photoDiplome,
                old_photoEtatCivil = OLD.photoEtatCivil,
                old_premierChoix = OLD.premierChoixCodeFormation,
                old_deuxiemeChoix = OLD.deuxiemeChoixCodeFormation,
                old_numBacc = OLD.numBacc,
                userId = '1',
                createdAt = NOW();
        `);
        await connection.query(`
            CREATE TRIGGER before_candidat_delete
            BEFORE DELETE ON candidat 
            FOR EACH ROW
                INSERT INTO candidat_audit
                SET operation_type = 'suppression',
                nom = OLD.nom,
                prenoms = OLD.prenoms,
                dateNaiss = OLD.dateNaiss,
                dateNaissExacte = OLD.dateNaissExacte,
                situationMatrimoniale = OLD.situationMatrimoniale,
                lieuNaissance = OLD.lieuNaissance,
                telephone = OLD.telephone,
                nomPere = OLD.nomPere,
                nomMere = OLD.nomMere,
                adresseParent = OLD.adresseParent,
                numCIN = OLD.numCIN,
                dateCIN = OLD.dateCIN,
                lieuCIN = OLD.lieuCIN,
                dateDuplicata = OLD.dateDuplicata,
                lieuDuplicata = OLD.lieuDuplicata,
                photo = OLD.photo,
                mel = OLD.mel,
                numBord = OLD.numBord,
                dateBord = OLD.dateBord,
                agenceBord = OLD.agenceBord,
                montantBord = OLD.montantBord,
                photoBord = OLD.photoBord,
                photoDiplome = OLD.photoDiplome,
                photoEtatCivil = OLD.photoEtatCivil,
                premierChoix = OLD.premierChoixCodeFormation,
                deuxiemeChoix = OLD.deuxiemeChoixCodeFormation,
                numBacc = OLD.numBacc,
                userId = '1',
                createdAt = NOW();
        `);
    }
}
exports.default = CreateCandidats;
//# sourceMappingURL=11.candidat.seed.js.map